commit 8f552181895921a377ab8c235340ea3d80ec7fc0
Merge: 897199a 9249e6a
Author: bors <bors@rust-lang.org>
Date:   Tue Apr 26 14:54:37 2016 -0700

    Auto merge of #31414 - durka:clone-copy, r=alexcrichton
    
    special-case #[derive(Copy, Clone)] with a shallow clone
    
    If a type is Copy then its Clone implementation can be a no-op. Currently `#[derive(Clone)]` generates a deep clone anyway. This can lead to lots of code bloat.
    
    This PR detects the case where Copy and Clone are both being derived (the general case of "is this type Copy" can't be determined by a syntax extension) and generates the shallow Clone impl. Right now this can only be done if there are no type parameters (see https://github.com/rust-lang/rust/issues/31085#issuecomment-178988663), but this restriction can be removed after specialization.
    
    Fixes #31085.
rustc: ./piston-image-0.3.11
cargo rustc -- -Ztime-passes -Zinput-stats
    Updating registry `https://github.com/rust-lang/crates.io-index`
   Compiling glob v0.2.11
   Compiling color_quant v1.0.0
   Compiling lzw v0.8.0
   Compiling libc v0.2.10
   Compiling num-traits v0.1.32
   Compiling rustc-serialize v0.3.19
   Compiling byteorder v0.3.13
   Compiling bitflags v0.6.0
   Compiling gcc v0.3.27
   Compiling num-integer v0.1.32
   Compiling rand v0.3.14
   Compiling miniz-sys v0.1.7
   Compiling num-iter v0.1.32
   Compiling flate2 v0.2.13
   Compiling gif v0.5.1
   Compiling num-complex v0.1.32
   Compiling num-bigint v0.1.32
   Compiling num-rational v0.1.32
   Compiling num v0.1.32
   Compiling png v0.3.1
   Compiling enum_primitive v0.0.1
makefile:2: recipe for target 'all' failed
done
